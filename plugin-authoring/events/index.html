<!DOCTYPE html>
<html>
  <head>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <title>Plugin Authoring: Events - Lita.io</title>
    <meta content='Documentation for Lita, a chat bot written in Ruby.' name='description'>
    <link href="/stylesheets/application-24781433.css" rel="stylesheet" />
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5500916-13', 'lita.io');ga('send', 'pageview');</script>
  </head>
  <body>
    <nav class='navbar navbar-default navbar-static-top navbar-inverse' role='navigation'>
      <div class='container'>
        <a class="navbar-brand hidden-xs" href="/">Lita Documentation</a>
        <ul class='nav navbar-nav navbar-right'>
          <li class='dropdown'>
            <a href='/getting-started/'>
              Getting Started
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/getting-started/">Overview</a></li>
              <li><a href="/getting-started/installation/">Installation</a></li>
              <li><a href="/getting-started/plugins/">Plugins</a></li>
              <li><a href="/getting-started/configuration/">Configuration</a></li>
              <li><a href="/getting-started/usage/">Usage</a></li>
              <li><a href="/getting-started/deployment/">Deployment</a></li>
              <li><a href="/getting-started/versioning-policy/">Versioning Policy</a></li>
            </ul>
          </li>
          <li class='dropdown'>
            <a href='/plugin-authoring/'>
              Plugin Authoring
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/plugin-authoring/">Overview</a></li>
              <li><a href="/plugin-authoring/adapters/">Adapters</a></li>
              <li><a href="/plugin-authoring/handlers/">Handlers</a></li>
              <li><a href="/plugin-authoring/events/">Events</a></li>
              <li><a href="/plugin-authoring/localization/">Localization</a></li>
              <li><a href="/plugin-authoring/extensions/">Extensions</a></li>
              <li><a href="/plugin-authoring/testing/">Testing</a></li>
              <li><a href="/plugin-authoring/publishing/">Publishing</a></li>
            </ul>
          </li>
          <li class='dropdown'>
            <a href='/releases/'>
              Releases
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/releases/4/">Lita 4</a></li>
              <li><a href="/releases/3/">Lita 3</a></li>
            </ul>
          </li>
          <li class='navbar-link'><a href="https://www.lita.io/">Lita.io <span class="glyphicon glyphicon-arrow-right"></span></a></li>
        </ul>
      </div>
    </nav>
    <div class='content'>
      <div class='container'>
        <div class='page-header'>
          <h1>Plugin Authoring</h1>
        </div>
        <div class='row'>
          <div class='col-md-3'>
            <nav>
              <ul class='nav nav-stacked'>
                <li>
                  <a href="/plugin-authoring/">Overview</a>
                  <ul>
                    <li><a href="/plugin-authoring/#plugin-types">Plugin types</a></li>
                    <li><a href="/plugin-authoring/#plugin-loading">Plugin loading</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/adapters/">Adapters</a>
                  <ul>
                    <li><a href="/plugin-authoring/adapters/#generating">Generating an adapter</a></li>
                    <li><a href="/plugin-authoring/adapters/#configuration">Configuration</a></li>
                    <li><a href="/plugin-authoring/adapters/#required-methods">Required methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#helper-methods">Helper methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#chat-service">Chat-service-specific methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#block-syntax">Block syntax</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/handlers/">Handlers</a>
                  <ul>
                    <li><a href="/plugin-authoring/handlers/#chat-routes">Chat routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#http-routes">HTTP routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#event-routes">Event routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#mixins">Mixins</a></li>
                    <li><a href="/plugin-authoring/handlers/#helper-methods">Helper methods</a></li>
                    <li><a href="/plugin-authoring/handlers/#timers">Timers</a></li>
                    <li><a href="/plugin-authoring/handlers/#configuration">Configuration</a></li>
                    <li><a href="/plugin-authoring/handlers/#chat-service">Chat-service-specific methods</a></li>
                    <li><a href="/plugin-authoring/handlers/#examples">Examples</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/configuration/">Configuration</a>
                </li>
                <li>
                  <a href="/plugin-authoring/events/">Events</a>
                  <ul>
                    <li><a href="/plugin-authoring/events/#built-in-events">Built-in events</a></li>
                  </ul>
                </li>
                <li><a href="/plugin-authoring/localization/">Localization</a></li>
                <li>
                  <a href="/plugin-authoring/extensions/">Extensions</a>
                  <ul>
                    <li><a href="/plugin-authoring/extensions/#hooks">Hooks</a></li>
                    <li><a href="/plugin-authoring/extensions/#examples">Examples</a></li>
                    <li><a href="/plugin-authoring/extensions/#using-extensions">Using Extensions</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/testing/">Testing</a>
                  <ul>
                    <li><a href="/plugin-authoring/testing/#setup">Setup</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-adapters">Testing adapters</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-handlers">Testing handlers</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-routes">Testing routes</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-behavior">Testing behavior</a></li>
                  </ul>
                </li>
                <li><a href="/plugin-authoring/publishing/">Publishing</a></li>
              </ul>
            </nav>
          </div>
          <div class='col-md-9'>
            <div class='page-header first-heading'>
              <h2>Events</h2>
            </div>
            <p>The <code>Lita::Robot</code> object serves as a global event bus in Lita's runtime. Any Lita code can trigger an event on the robot, and handler plugins can define event callbacks which subscribe to those events by name. When an event is triggered, the calling code can pass a payload hash with any arbitrary data it wishes the receiving code to have.</p>
            
            <p>To trigger an event from any Lita code with access to the currently running robot:</p>
            
            <pre><code class="language-ruby">robot.trigger(:some_event_happened, foo: :bar, baz: :blah)&#x000A;</code></pre>
            
            <p>See the <a href="/plugin-authoring/handlers/#event-routes">handlers guide</a> for details on how handlers can subscribe to events.</p>
            
            <h3 id="built-in-events">Built-in events</h3>
            
            <p>There are a few events which the core Lita framework triggers:</p>
            
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>:loaded</code></td>
                  <td>Fired when the <code>Lita::Robot</code> object has been initialized during start up. This can be used as a hook point for handlers to define routes that depend on user configuration not known until runtime, run migrations on data in Redis, or other start up tasks.</td>
                </tr>
                <tr>
                  <td><code>:message_dispatched</code></td>
                  <td>Fired when an incoming message matches a handler's chat route.</td>
                </tr>
                <tr>
                  <td><code>:route_authorization_failed</code></td>
                  <td>Fired when an incoming message fails to match a route because the sending user was not in any of the required authorization groups.</td>
                </tr>
                <tr>
                  <td><code>:shut_down_started</code></td>
                  <td>Fired when the robot first begins shutting down.</td>
                </tr>
                <tr>
                  <td><code>:shut_down_completed</code></td>
                  <td>Fired when the robot has finished shutting down both the built-in web server and the chat adapter.</td>
                </tr>
                <tr>
                  <td><code>:unhandled_message</code></td>
                  <td>Fired when the robot receives a message that does not match any routes.</td>
                </tr>
              </tbody>
            </table>
            
            <p>Adapters are encouraged to trigger a <code>:connected</code> event so that other plugins can run set up code that needs to be done at runtime.</p>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class='container'>
        <ul class='nav navbar-nav'>
          <li><a href="https://github.com/jimmycuadra/lita">GitHub</a></li>
          <li><a href="https://twitter.com/litachatbot">Twitter</a></li>
          <li><a href="https://groups.google.com/group/litaio">Mailing List</a></li>
          <li><a href="http://webchat.freenode.net/?channels=lita.io">IRC</a></li>
          <li><a href="http://www.stickermule.com/marketplace/2466-lita">Stickers</a></li>
        </ul>
        <ul class='nav navbar nav navbar-right'>
          <li>
            <div class='navbar-text'>© 2015 Lita.io</div>
          </li>
        </ul>
      </div>
    </footer>
    <script src="/javascripts/application-7a3c79c9.js"></script>
  </body>
</html>
