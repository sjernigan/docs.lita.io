<!DOCTYPE html>
<html>
  <head>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
    <title>Plugin Authoring: Configuration - Lita.io</title>
    <meta content='Documentation for Lita, a chat bot written in Ruby.' name='description'>
    <link href="/stylesheets/application-24781433.css" rel="stylesheet" />
    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5500916-13', 'lita.io');ga('send', 'pageview');</script>
  </head>
  <body>
    <nav class='navbar navbar-default navbar-static-top navbar-inverse' role='navigation'>
      <div class='container'>
        <a class="navbar-brand hidden-xs" href="/">Lita Documentation</a>
        <ul class='nav navbar-nav navbar-right'>
          <li class='dropdown'>
            <a href='/getting-started/'>
              Getting Started
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/getting-started/">Overview</a></li>
              <li><a href="/getting-started/installation/">Installation</a></li>
              <li><a href="/getting-started/plugins/">Plugins</a></li>
              <li><a href="/getting-started/configuration/">Configuration</a></li>
              <li><a href="/getting-started/usage/">Usage</a></li>
              <li><a href="/getting-started/deployment/">Deployment</a></li>
              <li><a href="/getting-started/versioning-policy/">Versioning Policy</a></li>
            </ul>
          </li>
          <li class='dropdown'>
            <a href='/plugin-authoring/'>
              Plugin Authoring
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/plugin-authoring/">Overview</a></li>
              <li><a href="/plugin-authoring/adapters/">Adapters</a></li>
              <li><a href="/plugin-authoring/handlers/">Handlers</a></li>
              <li><a href="/plugin-authoring/events/">Events</a></li>
              <li><a href="/plugin-authoring/localization/">Localization</a></li>
              <li><a href="/plugin-authoring/extensions/">Extensions</a></li>
              <li><a href="/plugin-authoring/testing/">Testing</a></li>
              <li><a href="/plugin-authoring/publishing/">Publishing</a></li>
            </ul>
          </li>
          <li class='dropdown'>
            <a href='/releases/'>
              Releases
              <b class='caret'></b>
            </a>
            <ul class='dropdown-menu'>
              <li><a href="/releases/4/">Lita 4</a></li>
              <li><a href="/releases/3/">Lita 3</a></li>
            </ul>
          </li>
          <li class='navbar-link'><a href="https://www.lita.io/">Lita.io <span class="glyphicon glyphicon-arrow-right"></span></a></li>
        </ul>
      </div>
    </nav>
    <div class='content'>
      <div class='container'>
        <div class='page-header'>
          <h1>Plugin Authoring</h1>
        </div>
        <div class='row'>
          <div class='col-md-3'>
            <nav>
              <ul class='nav nav-stacked'>
                <li>
                  <a href="/plugin-authoring/">Overview</a>
                  <ul>
                    <li><a href="/plugin-authoring/#plugin-types">Plugin types</a></li>
                    <li><a href="/plugin-authoring/#plugin-loading">Plugin loading</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/adapters/">Adapters</a>
                  <ul>
                    <li><a href="/plugin-authoring/adapters/#generating">Generating an adapter</a></li>
                    <li><a href="/plugin-authoring/adapters/#configuration">Configuration</a></li>
                    <li><a href="/plugin-authoring/adapters/#required-methods">Required methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#helper-methods">Helper methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#chat-service">Chat-service-specific methods</a></li>
                    <li><a href="/plugin-authoring/adapters/#block-syntax">Block syntax</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/handlers/">Handlers</a>
                  <ul>
                    <li><a href="/plugin-authoring/handlers/#chat-routes">Chat routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#http-routes">HTTP routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#event-routes">Event routes</a></li>
                    <li><a href="/plugin-authoring/handlers/#mixins">Mixins</a></li>
                    <li><a href="/plugin-authoring/handlers/#helper-methods">Helper methods</a></li>
                    <li><a href="/plugin-authoring/handlers/#timers">Timers</a></li>
                    <li><a href="/plugin-authoring/handlers/#configuration">Configuration</a></li>
                    <li><a href="/plugin-authoring/handlers/#chat-service">Chat-service-specific methods</a></li>
                    <li><a href="/plugin-authoring/handlers/#examples">Examples</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/configuration/">Configuration</a>
                </li>
                <li>
                  <a href="/plugin-authoring/events/">Events</a>
                  <ul>
                    <li><a href="/plugin-authoring/events/#built-in-events">Built-in events</a></li>
                  </ul>
                </li>
                <li><a href="/plugin-authoring/localization/">Localization</a></li>
                <li>
                  <a href="/plugin-authoring/extensions/">Extensions</a>
                  <ul>
                    <li><a href="/plugin-authoring/extensions/#hooks">Hooks</a></li>
                    <li><a href="/plugin-authoring/extensions/#examples">Examples</a></li>
                    <li><a href="/plugin-authoring/extensions/#using-extensions">Using Extensions</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/plugin-authoring/testing/">Testing</a>
                  <ul>
                    <li><a href="/plugin-authoring/testing/#setup">Setup</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-adapters">Testing adapters</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-handlers">Testing handlers</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-routes">Testing routes</a></li>
                    <li><a href="/plugin-authoring/testing/#testing-behavior">Testing behavior</a></li>
                  </ul>
                </li>
                <li><a href="/plugin-authoring/publishing/">Publishing</a></li>
              </ul>
            </nav>
          </div>
          <div class='col-md-9'>
            <div class='page-header first-heading'>
              <h2>Configuration</h2>
            </div>
            <p>Adapters and handlers share a common system for specifying configuration attributes. These attributes are exposed to users on the main <code>Lita.config</code> object and can be used to change the behavior or specify data that a plugin should use at runtime. Configuration attributes are automatically namespaced with the plugin's type and "namespace" value. For example, configuration attributes defined by an adapter called <code>Fancychat</code> would be found at <code>Lita.config.adapters.fancychat</code> and configuration attributes defined by a handler named <code>GuideExamples</code> would be found at <code>Lita.config.handlers.guide_examples</code>.</p>
            
            <p>If you're writing a plugin that's significantly complex, and you want to separate it into multiple classes, you can force the different classes to share the same configuration attribute and namespaced data store in Redis by using the class-level <code>namespace</code> method, providing a string namespace:</p>
            
            <pre><code class="language-ruby">class MyPluginExtraClass &lt; Lita::Handler&#x000A;  namespace "my_plugin"&#x000A;end&#x000A;</code></pre>
            
            <p>If you use the block form for defining a plugin, the namespace is determined by the first argument to the registration method:</p>
            
            <pre><code class="language-ruby">Lita.register_handler(:my_plugin) do&#x000A;  # ...&#x000A;end&#x000A;</code></pre>
            
            <p>Configuration attributes themselves are defined using the class-level <code>config</code> method. This method takes one mandatory argument, a Ruby symbol that will serve as the name of the attribute.</p>
            
            <pre><code class="language-ruby">class MyPlugin &lt; Lita::Handler&#x000A;  config :api_key&#x000A;end&#x000A;</code></pre>
            
            <p>The above code would create an attribute at <code>Lita.config.handlers.my_plugin.api_key</code>. Each attribute must be defined with a separate call to <code>config</code>. The <code>config</code> method takes several options which provide additional control over the attribute:</p>
            
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>:type</code></td>
                  <td><code>Object</code></td>
                  <td>Specifies a requirement that the value provided by the user must be of the given data type. If it isn't, Lita will abort with an error message during start up.</td>
                </tr>
                <tr>
                  <td><code>:types</code></td>
                  <td><code>Array</code></td>
                  <td>The same as <code>:type</code>, but used to specify that the value can be any of the types in the array. <code>:type</code> and <code>:types</code> actually both accept either one type or an array of types, so use whichever option name you think reads better.</td>
                </tr>
                <tr>
                  <td><code>:required</code></td>
                  <td>Boolean</td>
                  <td>Whether or not the attribute must be specified by the user. If a required attribute is not given a value, Lita will abort with an error message during start up.</td>
                </tr>
                <tr>
                  <td><code>:default</code></td>
                  <td><code>Object</code></td>
                  <td>The initial value of the attribute. If a value is not given using this option, the attribute's initial value will be <code>nil</code>.</td>
                </tr>
              </tbody>
            </table>
            
            <p>Configuration attributes can also be nested infinitely deep. If you want an attribute to have sub-attributes, pass <code>config</code> a block and call the method again inside the block:</p>
            
            <pre><code class="language-ruby">class MyPlugin &lt; Lita::Handler&#x000A;  config :api_credentials do&#x000A;    config :username, type: String&#x000A;    config :password, type: String&#x000A;  end&#x000A;end&#x000A;</code></pre>
            
            <p>This will generate two attributes, both of which must be strings: <code>Lita.config.handlers.my_plugin.api_credentials.username</code> and <code>Lita.config.handlers.my_plugin.api_credentials.password</code>. If a configuration attribute has any child attributes, it will become a "container" object, and any options provided in defining the parent attribute will not have any effect.</p>
            
            <p>In addition to type checking, you can also specify your own validation for a configuration attribute. Within the block passed to the <code>config</code> method, call the <code>validate</code> method. <code>validate</code> yields the attribute's value to a block. If the block returns a non-<code>nil</code> value, the attribute will fail validation and Lita will abort, using the block's return value as the reason. Here is an example:</p>
            
            <pre><code class="language-ruby">class MyPlugin &lt; Lita::Handler&#x000A;  config :api_token do&#x000A;    validate do |value|&#x000A;      "must be 10 characters" unless value.respond_to?(:size) &amp;&amp; value.size == 10&#x000A;    end&#x000A;  end&#x000A;end&#x000A;</code></pre>
            
            <p>Validation for nested attributes works in the same way.</p>
            
            <div class="alert alert-warning">
              <strong>Important!</strong>
              All the values in <code>Lita.config</code> are frozen at runtime. Consider them read only and wrap them with accessor methods in your plugins if you need their raw values to be manipulated in some way.
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class='container'>
        <ul class='nav navbar-nav'>
          <li><a href="https://github.com/jimmycuadra/lita">GitHub</a></li>
          <li><a href="https://twitter.com/litachatbot">Twitter</a></li>
          <li><a href="https://groups.google.com/group/litaio">Mailing List</a></li>
          <li><a href="http://webchat.freenode.net/?channels=lita.io">IRC</a></li>
          <li><a href="http://www.stickermule.com/marketplace/2466-lita">Stickers</a></li>
        </ul>
        <ul class='nav navbar nav navbar-right'>
          <li>
            <div class='navbar-text'>© 2015 Lita.io</div>
          </li>
        </ul>
      </div>
    </footer>
    <script src="/javascripts/application-7a3c79c9.js"></script>
  </body>
</html>
